<div class="container-fluid">
	<div class="row">
		<div class="col-md-10 col-xs-12 no-gutter">
			<h2 ng-if="!room.rawMessages.$resolved">Loading...</h2>

			<h2 ng-if="room.rawMessages.$resolved && room.rawMessages.length == 0">No messages</h2>
			<ol class="list-unstyled message-list">
				<li class="message" ng-repeat="message in room.messages">
					<div message-mention="{{room.userService.current.nick}}"
							 message-mention-text="{{message.text}}">
						<div class="message-author">
							<span ng-if="::message.$firstInSeries">
								<img gravatar-src-once="message.author.email | lowercase" gravatar-size="20"/>
								<div class="name">{{::message.author.nick}}</div>
							</span>
						</div>
						<div class="message-caret" ng-if="::message.$firstInSeries"></div>
						<div class="message-body" ng-class="::{ 'new-message-body': message.$firstInSeries }">
							<span bunker-message="{{message.text}}">
							</span>
							<span ng-if="::message.$firstInSeries" class="message-timestamp text-muted">
								<small>{{::message.createdAt | date:'medium'}}</small>
							</span>
						</div>
					</div>
				</li>
			</ol>
		</div>

		<div class="col-md-2 hidden-sm hidden-xs no-gutter member-list">
			<ul class="list-group">
				<li class="list-group-item"
						ng-repeat="user in room.members | orderBy:'nick'">
					<img gravatar-src-once="user.email | lowercase" gravatar-size="20"/>
					{{user.nick}}
				</li>
			</ul>

			<div class="room-options">
				<a ng-click="room.subDay()" class="btn btn-primary">«</a>
				<input type="date" class="form-control inline" ng-model="room.date">
				<a ng-href ng-click="room.addDay()" class="btn btn-primary">»</a>
				<a ui-sref="room({roomId: room.roomId})" class="btn btn-link">
					Leave History
				</a>
			</div>
		</div>
	</div>
</div>
